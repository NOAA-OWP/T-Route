#--------------------------------------------------------------------------------
bmi_parameters:
    #----------
    segment_number: 3
    waterbody_number: 0
    io_number: 3
    upstream_number: 1
    gage_number: 0
    flowpath_columns:
        - 'id'
        - 'toid'
        - 'lengthkm'
    attributes_columns:
        - 'attributes_id'
        - 'rl_gages'
        - 'rl_NHDWaterbodyComID'
        - 'MusK'
        - 'MusX'
        - 'n'
        - 'So'
        - 'ChSlp'
        - 'BtmWdth'
        - 'nCC'
        - 'TopWdthCC'
        - 'TopWdth'
    waterbody_columns:
        - 'hl_link'
        - 'ifd'
        - 'LkArea'
        - 'LkMxE'
        - 'OrificeA'
        - 'OrificeC'
        - 'OrificeE'
        - 'WeirC'
        - 'WeirE'
        - 'WeirL'
    network_columns:
        - 'network_id'
        - 'hydroseq'
        - 'hl_uri'

#--------------------------------------------------------------------------------
log_parameters:
    #----------
    showtiming: False
    log_level : CRITICAL
#--------------------------------------------------------------------------------
network_topology_parameters:
    #----------
    supernetwork_parameters:
        #----------
        geo_file_type: HYFeaturesNetwork  #NHDNetwork        
        geo_file_path: domain/gauge_01013500.gpkg 
        columns: 
            key: 'id'
            downstream: 'toid'
            dx : 'lengthkm'
            n : 'n'
            ncc : 'nCC'
            s0 : 'So'
            bw : 'BtmWdth'
            waterbody : 'rl_NHDWaterbodyComID'
            #gages : 'rl_gages'
            tw : 'TopWdth'
            twcc : 'TopWdthCC'
            musk : 'MusK'
            musx : 'MusX'
            cs : 'ChSlp'
            alt: 'alt'
        duplicate_wb_segments:
            - 717696
            - 1311881
            - 3133581
            - 1010832
            - 1023120
            - 1813525
            - 1531545
            - 1304859
            - 1320604
            - 1233435
            - 11816
            - 1312051
            - 2723765
            - 2613174
            - 846266
            - 1304891
            - 1233595
            - 1996602
            - 2822462
            - 2384576
            - 1021504
            - 2360642
            - 1326659
            - 1826754
            - 572364
            - 1336910
            - 1332558
            - 1023054
            - 3133527
            - 3053788
            - 3101661
            - 2043487
            - 3056866
            - 1296744
            - 1233515
            - 2045165
            - 1230577
            - 1010164
            - 1031669
            - 1291638
            - 1637751
    waterbody_parameters:
        #----------
        break_network_at_waterbodies: True 
        level_pool:
            #----------
            level_pool_waterbody_parameter_file_path: domain/gauge_01013500.gpkg 

#--------------------------------------------------------------------------------
compute_parameters:
    #----------
    parallel_compute_method: bmi 
    subnetwork_target_size : 10000
    cpu_pool               : 16
    compute_kernel         : V02-structured
    assume_short_ts        : True  
    restart_parameters:
        #----------
        start_datetime: "2021-08-23_13:00:00"
    hybrid_parameters:
        run_hybrid_routing: False
        diffusive_domain  : domain/coastal_domain.yaml 
        use_natl_xsections: False
        topobathy_domain  :  domain/final_diffusive_natural_xs.nc 
        run_refactored_network: False
        refactored_domain:  domain/unit_test_noRS/refactored_coastal_domain.yaml 
        refactored_topobathy_domain:  domain/refac_final_diffusive_natural_xs.nc 
        coastal_boundary_domain: domain/coastal_boundary_domain.yaml
    forcing_parameters:
        #----------
        qts_subdivisions            : 12
        dt                          : 300 # [sec]
        qlat_input_folder           : channel_forcing/
        qlat_file_pattern_filter    : "*NEXOUT.csv"
        #nexus_input_folder          : channel_forcing/ 
        #nexus_file_pattern_filter   : "*NEXOUT.csv" # or "*NEXOUT.parquet" or "nex-*"
        #binary_nexus_file_folder    : binary_files # this is required if nexus_file_pattern_filter="nex-*"
        #coastal_boundary_input_file : #channel_forcing/schout_1.nc  
        nts                         : 288 #288 for 1day
        max_loop_size               : 24 # [hr]  
    data_assimilation_parameters:
        #----------
        #usgs_timeslices_folder   : #usgs_TimeSlice/
        #usace_timeslices_folder  : #usace_TimeSlice/
        #timeslice_lookback_hours : #48 
        streamflow_da:
            #----------
            streamflow_nudging            : True
            diffusive_streamflow_nudging  : False
            gage_segID_crosswalk_file     : domain/RouteLink.nc  
            crosswalk_gage_field          : 'gages'
            crosswalk_segID_field         : 'link'
            wrf_hydro_lastobs_file        : lastobs/nudgingLastObs.2021-08-23_12:00:00.nc                
            lastobs_output_folder         : 
            da_decay_coefficient          : 120
            wrf_hydro_lastobs_lead_time_relative_to_simulation_start_time : 0
        persistence_reservoir_da:
            #----------
            reservoir_persistence_usgs  : True
            reservoir_persistence_usace : False
            usgs_timeslices_folder      : usgs_TimeSlice/
            usace_timeslices_folder     : usace_TimeSlice/
            gage_lakeID_crosswalk_file  : # domain/reservoir_index_AnA.nc
            timeslice_lookback_hours    : 2 
            qc_threshold                : #1
            interpolation_limit_min     : 
        rfc_reservoir_da:
            reservoir_rfc_forecast                  : False
            rfc_forecast_time_series_folder         : rfc_TimeSeries/
            gage_lakeID_crosswalk_file              : domain/lake_gage_df.csv
            reservoir_rfc_forecast_lookback_hours   : 48
            reservoir_rfc_forecast_persist_days     : 11
            reservoir_rfc_timeseries_offset_hours   : 28

#--------------------------------------------------------------------------------
output_parameters:
    #----------
    test_output: output/output.pkl
#    lite_restart:
        #----------
#        lite_restart_output_directory: restart/
#    chrtout_output:
        #----------
#        wrf_hydro_channel_output_source_folder: channel_forcing/
#    chanobs_output:
        #----------
#        chanobs_output_directory: output/
#        chanobs_filepath        : lcr_chanobs.nc
#    lakeout_output: lakeout/